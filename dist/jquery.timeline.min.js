!function r(s,o,c){function l(t,e){if(!o[t]){if(!s[t]){var a="function"==typeof require&&require;if(!e&&a)return a(t,!0);if(h)return h(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=o[t]={exports:{}};s[t][0].call(i.exports,function(e){return l(s[t][1][e]||e)},i,i.exports,r,s,o,c)}return o[t].exports}for(var h="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,t,a){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){i(t,e,a[e])})}return t}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/*!
 * jQuery Timeline
 * ------------------------
 * Version: 2.0.0a1
 * Author: Ka2 (https://ka2.org/)
 * Repository: https://github.com/ka215/jquery.timeline/tree/develop
 * Lisenced: MIT
 */
var s="Timeline",o="jq.timeline",c=".".concat(o),u="jqtl-",l=$.fn[s],T={type:"bar",scale:"day",startDatetime:"currently",endDatetime:"auto",datetimePrefix:"",headline:{display:!0,title:"",range:!0,locale:"en-US",format:{hour12:!1}},footer:{display:!0,content:"",range:!1,locale:"en-US",format:{hour12:!1}},zerofillYear:!1,range:3,sidebar:{sticky:!1,overlay:!1,list:[]},rows:"auto",rowHeight:48,width:"auto",height:"auto",minGridSize:30,marginHeight:2,ruler:{top:{lines:[],height:30,fontSize:14,color:"#777777",background:"#FFFFFF",locale:"en-US",format:{hour12:!1}}},rangeAlign:"current",naviIcon:{left:"".concat(u,"circle-left"),right:"".concat(u,"circle-right")},loader:"default",hideScrollbar:!1,eventMeta:{display:!1,scale:"day",locale:"en-US",format:{hour12:!1},content:""},showPointer:!0,storage:"session",debug:!1},d={millennium:100,century:500,decade:500,lustrum:500,year:500,month:540,week:530,day:366,hour:720,quarterHour:720,halfHour:720,minute:720,second:900},v={uid:"",eventId:"",x:0,y:T.marginHeight,width:T.minGridSize,height:T.rowHeight-2*T.marginHeight,bgColor:"#E7E7E7",color:"#343A40",bdColor:"#6C757D",label:"",content:"",image:"",margin:T.marginHeight,rangeMeta:"",size:"normal",extend:{},callback:function(){},relation:{}},g={INITIALIZED:"initialized".concat(c),HIDE:"hide".concat(c),SHOW:"show".concat(c),CLICK_EVENT:"click.open".concat(c),FOCUSIN_EVENT:"focusin.event".concat(c),FOCUSOUT_EVENT:"focusout.event".concat(c),MOUSEENTER_POINTER:"mouseenter.pointer".concat(c),MOUSELEAVE_POINTER:"mouseleave.pointer".concat(c)},N={TIMELINE_CONTAINER:"".concat(u,"container"),TIMELINE_MAIN:"".concat(u,"main"),TIMELINE_HEADLINE:"".concat(u,"headline"),TIMELINE_HEADLINE_WRAPPER:"".concat(u,"headline-wrapper"),HEADLINE_TITLE:"".concat(u,"timeline-title"),RANGE_META:"".concat(u,"range-meta"),RANGE_SPAN:"".concat(u,"range-span"),TIMELINE_EVENT_CONTAINER:"".concat(u,"event-container"),TIMELINE_BACKGROUND_GRID:"".concat(u,"bg-grid"),TIMELINE_RELATION_LINES:"".concat(u,"relation-lines"),TIMELINE_EVENTS:"".concat(u,"events"),TIMELINE_EVENT_NODE:"".concat(u,"event-node"),TIMELINE_EVENT_LABEL:"".concat(u,"event-label"),TIMELINE_EVENT_THUMBNAIL:"".concat(u,"event-thumbnail"),TIMELINE_RULER_LINES:"".concat(u,"ruler-line-rows"),TIMELINE_RULER_ITEM:"".concat(u,"ruler-line-item"),TIMELINE_SIDEBAR:"".concat(u,"side-index"),TIMELINE_SIDEBAR_MARGIN:"".concat(u,"side-index-margin"),TIMELINE_SIDEBAR_ITEM:"".concat(u,"side-index-item"),TIMELINE_FOOTER:"".concat(u,"footer"),TIMELINE_FOOTER_CONTENT:"".concat(u,"footer-content"),VIEWER_EVENT_TITLE:"".concat(u,"event-title"),VIEWER_EVENT_CONTENT:"".concat(u,"event-content"),VIEWER_EVENT_META:"".concat(u,"event-meta"),VIEWER_EVENT_IMAGE_WRAPPER:"".concat(u,"event-image-wrapper"),VIEWER_EVENT_IMAGE:"".concat(u,"event-image"),VIEWER_EVENT_TYPE_POINTER:"".concat(u,"event-type-pointer"),HIDE_SCROLLBAR:"".concat(u,"hide-scrollbar"),HIDE:"".concat(u,"hide"),RULER_ITEM_ALIGN_LEFT:"".concat(u,"rli-left"),STICKY_LEFT:"".concat(u,"sticky-left"),OVERLAY:"".concat(u,"overlay"),ALIGN_SELF_RIGHT:"".concat(u,"align-self-right"),LOADER_ITEM:"".concat(u,"loading")},E={EVENT_NODE:".".concat(u,"event-node"),EVENT_VIEW:".timeline-event-view, .".concat(u,"event-view"),RULER_TOP:".".concat(u,"ruler-top"),RULER_BOTTOM:".".concat(u,"ruler-bottom"),TIMELINE_CONTAINER:".".concat(N.TIMELINE_CONTAINER),TIMELINE_RULER_TOP:".".concat(u,"ruler-top"),TIMELINE_RULER_BOTTOM:".".concat(u,"ruler-bottom"),TIMELINE_RELATION_LINES:".".concat(N.TIMELINE_RELATION_LINES),TIMELINE_EVENTS:".".concat(N.TIMELINE_EVENTS),TIMELINE_SIDEBAR_ITEM:".".concat(N.TIMELINE_SIDEBAR_ITEM),TIMELINE_EVENT_NODE:".".concat(N.TIMELINE_EVENT_NODE),VIEWER_EVENT_TYPE_POINTER:".".concat(N.VIEWER_EVENT_TYPE_POINTER),LOADER:"#".concat(u,"loader"),DEFAULT_EVENTS:".timeline-events"},p=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this._config=this._getConfig(t),this._element=e,this._selector=null,this._isInitialized=!1,this._isCached=!1,this._isCompleted=!1,this._isShown=!1,this._instanceProps={}}var e,t,a;return e=i,a=[{key:"_jQueryInterface",value:function(a){for(var e=arguments.length,n=new Array(1<e?e-1:0),t=1;t<e;t++)n[t-1]=arguments[t];return this.each(function(){var e=$(this).data(o),t=h({},T,$(this).data(),"object"===r(a)&&a?a:{});if(e||(e=new i(this,t),$(this).data(o,e)),"string"==typeof a&&"_"!=a.charAt(0)){if(void 0===e[a])throw new ReferenceError('No method named "'.concat(a,'"'));e[a](n)}else e._isInitialized||e._init()})}},{key:"VERSION",get:function(){return"2.0.0a1"}},{key:"Default",get:function(){return T}}],(t=[{key:"_getConfig",value:function(e){return e=h({},T,e)}},{key:"_filterScaleKeyName",value:function(e){var t=null;switch(!0){case/^quarter-?(|hour)$/i.test(e):t="quarterHour";break;case/^half-?(|hour)$/i.test(e):t="halfHour";break;default:t=e}return t}},{key:"_init",value:function(){var t=this;this._debug("_init");var e=this._element,a="".concat(e.tagName).concat(e.id?"#".concat(e.id):"").concat(e.className?".".concat(e.className.replace(/\s/g,".")):"");if(this._selector=a.toLowerCase(),!this._isInitialized&&!this._isCompleted){if(this.showLoader(),this._calcVars(),!this._verifyMaxRenderableRange())throw new RangeError("Timeline display period exceeds maximum renderable range.");if(!this._isInitialized){this._renderView();var n=$.Event(g.INITIALIZED,{_elem:e});$(e).trigger(n),$(e).off(g.INITIALIZED)}this._isCached||this._loadEvent(),this._isCached&&this._placeEvent(),$(document).on(g.CLICK_EVENT,"".concat(this._selector," ").concat(E.EVENT_NODE),function(e){return t.openEvent(e)}),$(e).on(g.FOCUSIN_EVENT,E.TIMELINE_EVENT_NODE,function(e){return t._activeEvent(e)}),$(e).on(g.FOCUSOUT_EVENT,E.TIMELINE_EVENT_NODE,function(e){return t._activeEvent(e)}),/^point(|er)$/i.test(this._config.type)&&($(e).on(g.MOUSEENTER_POINTER,E.VIEWER_EVENT_TYPE_POINTER,function(e){return t._hoverPointer(e)}),$(e).on(g.MOUSELEAVE_POINTER,E.VIEWER_EVENT_TYPE_POINTER,function(e){return t._hoverPointer(e)})),this._isCompleted=!0}}},{key:"_calcVars",value:function(){var t=this,e=this._config,a={};if(a.begin=this.supplement(null,this._getPluggableDatetime(e.startDatetime,"first")),a.end=this.supplement(null,this._getPluggableDatetime(e.endDatetime,"last")),a.scaleSize=this.supplement(null,e.minGridSize,this.validateNumeric),a.rows=this._getPluggableRows(),a.rowSize=this.supplement(null,e.rowHeight,this.validateNumeric),a.width=this.supplement(null,e.width,this.validateNumeric),a.height=this.supplement(null,e.height,this.validateNumeric),this._instanceProps=a,/^(year|month)s?$/i.test(e.scale)){var n=this._verifyScale(e.scale),i=Object.values(n),r=this.numRound(i.reduce(function(e,t){return e+t},0)/i.length,4),s=/^years?$/i.test(e.scale)?365:30,o=0;i.forEach(function(e){o+=t.numRound(e*a.scaleSize/s,2)}),a.scale=864e5*r,a.grids=i.length,a.variableScale=n,a.fullwidth=o}else a.scale=this._verifyScale(e.scale),a.grids=Math.ceil((a.end-a.begin)/a.scale),a.variableScale=null,a.fullwidth=a.grids*a.scaleSize;for(var c in a.fullheight=a.rows*a.rowSize,a.visibleWidth=0<a.width?"".concat(a.width<=a.fullwidth?a.width:a.fullwidth,"px"):"100%",a.visibleHeight=0<a.height?"".concat(a.height<=a.fullheight?a.height:a.fullheight,"px"):"auto",a)if("width"!==c&&"height"!==c&&"variableScale"!==c&&this.is_empty(a[c]))throw new TypeError('Property "'.concat(c,'" cannot set because undefined or invalid variable.'));if(a.fullwidth<2||a.fullheight<2)throw new TypeError("The range of the timeline to be rendered is incorrect.");this._instanceProps=a}},{key:"_getPluggableDatetime",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",a=this._config,n=null,i=function(e,t){switch(!0){case/^millenniums?|millennia$/i.test(t):case/^century$/i.test(t):case/^dec(ade|ennium)$/i.test(t):case/^lustrum$/i.test(t):case/^years?$/i.test(t):return new Date(e.getFullYear(),0,1);case/^months?$/i.test(t):return new Date(e.getFullYear(),e.getMonth(),1);case/^(week|day)s?$/i.test(t):return new Date(e.getFullYear(),e.getMonth(),e.getDate());case/^(|half|quarter)-?hours?$/i.test(t):return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case/^minutes?$/i.test(t):return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case/^seconds?$/i.test(t):return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())}};switch(!0){case/^current(|ly)$/i.test(e):n=new Date;break;case/^auto$/i.test(e):var r=null,s=this.getHigherScale(a.scale);n=/^current(|ly)$/i.test(a.startDatetime)?i(n=new Date,a.scale):this.getCorrectDatetime(a.startDatetime),a.range||0<a.range?(r=/^years?$/i.test(s)?315576e5:/^months?$/i.test(s)?2630016000.0000005:this._verifyScale(s),n.setTime(n.getTime()+r*a.range)):(r=/^years?$/i.test(a.scale)?315576e5:/^months?$/i.test(a.scale)?2630016000.0000005:this._verifyScale(a.scale),n.setTime(n.getTime()+r*d[this._filterScaleKeyName(a.scale)]));break;default:n=this.getCorrectDatetime(e)}return this.is_empty(t)||("first"===t?n=i(n,a.scale):"last"===t&&(n=function(e,t){var a;switch(!0){case/^millenniums?|millennia$/i.test(t):case/^century$/i.test(t):case/^dec(ade|ennium)$/i.test(t):case/^lustrum$/i.test(t):case/^years?$/i.test(t):a=new Date(e.getFullYear()+1,0,1);break;case/^months?$/i.test(t):a=new Date(e.getFullYear(),e.getMonth()+1,1);break;case/^(week|day)s?$/i.test(t):a=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1);break;case/^(|half|quarter)-?hours?$/i.test(t):a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()+1);break;case/^minutes?$/i.test(t):a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()+1);break;case/^seconds?$/i.test(t):a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()+1)}return new Date(a.getTime()-1)}(n,a.scale))),n.getTime()}},{key:"_getPluggableParams",value:function(e){var t={};if("string"==typeof e&&e)try{(t=JSON.parse(JSON.stringify(new Function("return ".concat(e))()))).hasOwnProperty("extend")&&(t.extend=JSON.parse(JSON.stringify(new Function("return ".concat(t.extend))())))}catch(e){console.warn("Can not parse to object therefor invalid param.")}return t}},{key:"_getPluggableRows",value:function(){var e=this._config,t=this.supplement("auto",e.rows,this.validateNumeric);return"auto"===t&&(t=e.sidebar.list.length),0<t?t:1}},{key:"_verifyScale",value:function(e){var t=this._config,a=this._instanceProps,n=-1;if(void 0===e||"string"!=typeof e)return!1;switch(!0){case/^millisec(|ond)s?$/i.test(e):n=1;break;case/^seconds?$/i.test(e):n=1e3;break;case/^minutes?$/i.test(e):n=6e4;break;case/^quarter-?(|hour)$/i.test(e):n=9e5;break;case/^half-?(|hour)$/i.test(e):n=18e5;break;case/^hours?$/i.test(e):n=36e5;break;case/^days?$/i.test(e):n=864e5;break;case/^weeks?$/i.test(e):n=6048e5;break;case/^months?$/i.test(e):if(/^(year|month)s?$/i.test(t.scale))return this._diffDate(a.begin,a.end,e);n=2630016000.0000005;break;case/^years?$/i.test(e):if(/^(year|month)s?$/i.test(t.scale))return this._diffDate(a.begin,a.end,e);n=315576e5;break;case/^lustrum$/i.test(e):n=3.1536*Math.pow(10,8)/2*1e3;break;case/^dec(ade|ennium)$/i.test(e):n=3.1536*Math.pow(10,8)*1e3;break;case/^century$/i.test(e):n=315576e7;break;case/^millenniums?|millennia$/i.test(e):n=3.1536*Math.pow(10,10)*1e3;break;default:console.warn("Specified an invalid scale."),n=-1}return 0<n&&n}},{key:"_verifyMaxRenderableRange",value:function(){return this._instanceProps.grids<=d[this._filterScaleKeyName(this._config.scale)]}},{key:"_renderView",value:function(){this._debug("_renderView");var e=this._element,t=this._config,a=this._instanceProps,n=$("<div></div>",{class:N.TIMELINE_CONTAINER,style:"width: ".concat(a.visibleWidth,"; height: ").concat(a.visibleHeight,";")}),i=$("<div></div>",{class:N.TIMELINE_MAIN});if(0==$(e).length)throw new TypeError("Does not exist the element to render a timeline container.");t.debug&&console.log("Timeline:{ fullWidth: ".concat(a.fullwidth,"px,"),"fullHeight: ".concat(a.fullheight,"px,"),"viewWidth: ".concat(a.visibleWidth),"viewHeight: ".concat(a.visibleHeight," }")),$(e).css("position","relative"),t.hideScrollbar&&n.addClass(N.HIDE_SCROLLBAR),$(e).prepend(this._createHeadline()),i.append(this._createEventContainer()),this.is_empty(t.ruler.top)||i.prepend(this._createRuler("top")),this.is_empty(t.ruler.bottom)||i.append(this._createRuler("bottom"));var r={top:parseInt(i.find(E.RULER_TOP).height(),10)-1,bottom:parseInt(i.find(E.RULER_BOTTOM).height(),10)-1};0<t.sidebar.list.length&&n.prepend(this._createSideIndex(r)),n.append(i),$(e).append(n),$(e).append(this._createFooter()),this._isShown=!0}},{key:"_createHeadline",value:function(){var e=this._config,t=this._instanceProps,a=this.supplement(T.headline.display,e.headline.display,this.validateBoolean),n=this.supplement(null,e.headline.title),i=this.supplement(T.headline.range,e.headline.range,this.validateBoolean),r=this.supplement(T.headline.locale,e.headline.locale),s=this.supplement(T.headline.format,e.headline.format),o=this.supplement(null,t.begin),c=this.supplement(null,t.end),l=$("<div></div>",{class:N.TIMELINE_HEADLINE}),h=$("<div></div>",{class:N.TIMELINE_HEADLINE_WRAPPER});if(n&&h.append('<h3 class="'.concat(N.HEADLINE_TITLE,'">').concat(e.headline.title,"</h3>")),i&&o&&c){var u="".concat(new Date(o).toLocaleString(r,s),'<span class="').concat(N.RANGE_SPAN,'"></span>').concat(new Date(c).toLocaleString(r,s));h.append('<div class="'.concat(N.RANGE_META,'">').concat(u,"</div>"))}return a||l.addClass(N.HIDE),l.append(h)}},{key:"_createEventContainer",value:function(){for(var e,t,a,n,i=this,r=this._config,s=this._instanceProps,o=s.fullheight+Math.ceil(s.rows/2),c=$("<div></div>",{class:N.TIMELINE_EVENT_CONTAINER,style:"height:".concat(o,"px;")}),l=$('<canvas width="'.concat(s.fullwidth-1,'" height="').concat(o,'" class="').concat(N.TIMELINE_BACKGROUND_GRID,'"></canvas>')),h=$('<canvas width="'.concat(s.fullwidth-1,'" height="').concat(o,'" class="').concat(N.TIMELINE_RELATION_LINES,'"></canvas>')),u=$("<div></div>",{class:N.TIMELINE_EVENTS}),d=0,g=l[0].getContext("2d"),p=function(e,t){t=i.supplement(!1,t),g.strokeStyle="rgba( 51, 51, 51, 0.025 )",g.lineWidth=1,g.filter="url(#crisp)",g.beginPath(),t?g.setLineDash([1,2]):g.setLineDash([]),g.moveTo(e-.5,0),g.lineTo(e-.5,s.fullheight),g.closePath(),g.stroke()},f=d=0;f<s.rows;f++){d+=f%2==0?1:0;var v=f*s.rowSize+d;e=v,t=f%2==0?"#FEFEFE":"#F8F8F8",t=i.supplement("#FFFFFF",t),g.fillStyle=t,g.fillRect(0,e+.5,s.fullwidth,s.rowSize+1.5),g.stroke()}d=0;for(var E=1;E<s.rows;E++){d+=E%2==0?1:0;var m=E*s.rowSize+d;a=m,n=!0,n=i.supplement(!1,n),g.strokeStyle="rgba( 51, 51, 51, 0.1 )",g.lineWidth=1,g.filter="url(#crisp)",g.beginPath(),n?g.setLineDash([1,2]):g.setLineDash([]),g.moveTo(0,a+.5),g.lineTo(s.fullwidth,a+.5),g.closePath(),g.stroke()}if(/^(year|month)s?$/i.test(r.scale))for(var _=/^years?$/i.test(r.scale)?365:30,y=0,b=Object.keys(s.variableScale),w=0;w<b.length;w++){var I=b[w];p(y+=this.numRound(s.variableScale[I]*s.scaleSize/_,2),!1)}else for(var T=1;T<s.grids;T++)p(T*s.scaleSize,!1);return c.append(l).append(h).append(u)}},{key:"_createRuler",value:function(f){var v=this,E=this._config,m=this._instanceProps,e=this.supplement([E.scale],E.ruler[f].lines,function(e,t){return v.is_array(t)&&0<t.length?t:e}),_=this.supplement(T.ruler.top.height,E.ruler[f].height),t=this.supplement(T.ruler.top.fontSize,E.ruler[f].fontSize),a=this.supplement(T.ruler.top.color,E.ruler[f].color),n=this.supplement(T.ruler.top.background,E.ruler[f].background),i=this.supplement(T.ruler.top.locale,E.ruler[f].locale),r=this.supplement(T.ruler.top.format,E.ruler[f].format),y={lines:e,height:_,fontSize:t,color:a,background:n,locale:i,format:r},s=m.fullwidth-1,o=e.length*_,c=$("<div></div>",{class:"".concat(u,"ruler-").concat(f),style:"height:".concat(o,"px;")}),l=$('<canvas class="'.concat(u,"ruler-bg-").concat(f,'" width="').concat(s,'" height="').concat(o,'"></canvas>')),b=$("<div></div>",{class:"".concat(u,"ruler-content-").concat(f)}),w=0,I=l[0].getContext("2d");return I.fillStyle=n,I.fillRect(0,0,I.canvas.width,I.canvas.height),I.strokeStyle="rgba( 51, 51, 51, 0.1 )",I.lineWidth=1,I.filter="url(#crisp)",e.some(function(e,t){if(/^(quarter|half)-?(|hour)$/i.test(e))return!0;I.beginPath();var a="top"===f?_*(t+1)-.5:_*t+.5;I.moveTo(0,a),I.lineTo(I.canvas.width,a);var n=null,i=0,r=-1.5;if(/^(year|month)s?$/i.test(E.scale)){n=v._filterVariableScale(e);for(var s=Object.keys(n),o=0;o<s.length;o++){var c=s[o];i+=v.numRound(n[c],2),I.moveTo(i+r,"top"===f?a-_:a),I.lineTo(i+r,"top"===f?a:a+_)}}else{n=v._getGridsPerScale(e);var l=!0,h=!1,u=void 0;try{for(var d,g=n[Symbol.iterator]();!(l=(d=g.next()).done);l=!0){var p=d.value;if(v.is_empty(p)||p>=m.grids)break;if(i+=p*m.scaleSize,Math.ceil(i)-r>=I.canvas.width)break;I.moveTo(i+r,"top"===f?a-_:a),I.lineTo(i+r,"top"===f?a:a+_)}}catch(e){h=!0,u=e}finally{try{l||null==g.return||g.return()}finally{if(h)throw u}}}I.closePath(),I.stroke(),b.append(v._createRulerContent(n,e,y)),w++}),e.length!=w&&c.css("height","".concat(w*_,"px")),c.append(l).append(b)}},{key:"_filterVariableScale",value:function(e){for(var t=this._config,a=this._instanceProps,n=/^years?$/i.test(t.scale)?365:30,i=a.variableScale,r={},s=Object.keys(i),o=0;o<s.length;o++){var c=s[o],l=i[c],h=this.numRound(l*a.scaleSize/n,2),u=null,d=void 0,g=void 0;switch(!0){case/^millenniums?|millennia$/i.test(e):u=Math.ceil(this.getCorrectDatetime(c).getFullYear()/1e3),r.hasOwnProperty(u)?r[u]+=h:r[u]=h;break;case/^century$/i.test(e):u=Math.ceil(this.getCorrectDatetime(c).getFullYear()/100),r.hasOwnProperty(u)?r[u]+=h:r[u]=h;break;case/^dec(ade|ennium)$/i.test(e):u=Math.ceil(this.getCorrectDatetime(c).getFullYear()/10),r.hasOwnProperty(u)?r[u]+=h:r[u]=h;break;case/^lustrum$/i.test(e):u=Math.ceil(this.getCorrectDatetime(c).getFullYear()/5),r.hasOwnProperty(u)?r[u]+=h:r[u]=h;break;case/^years?$/i.test(e):u="".concat(this.getCorrectDatetime(c).getFullYear()),r.hasOwnProperty(u)?r[u]+=h:r[u]=h;break;case/^months?$/i.test(e):r["".concat(this.getCorrectDatetime(c).getFullYear(),"/").concat(this.getCorrectDatetime(c).getMonth()+1)]=h;break;case/^weeks?$/i.test(e):d=c.split(","),g=this.getWeek(d[0]),r["".concat(this.getCorrectDatetime(d[0]).getFullYear(),",").concat(g)]=h;break;case/^weekdays?$/i.test(e):d=c.split(","),g=this.getCorrectDatetime(d[0]).getDay(),r["".concat(this.getCorrectDatetime(d[0]).getFullYear(),"/").concat(this.getCorrectDatetime(d[0]).getMonth()+1,"/1,").concat(g)]=h;break;case/^days?$/i.test(e):r["".concat(this.getCorrectDatetime(c).getFullYear(),"/").concat(this.getCorrectDatetime(c).getMonth()+1,"/1")]=h;break;case/^hours?$/i.test(e):r["".concat(this.getCorrectDatetime(c).getFullYear(),"/").concat(this.getCorrectDatetime(c).getMonth()+1,"/1 0")]=h;break;case/^minutes?$/i.test(e):r["".concat(this.getCorrectDatetime(c).getFullYear(),"/").concat(this.getCorrectDatetime(c).getMonth()+1,"/1 0:00")]=h;break;case/^seconds?$/i.test(e):r["".concat(this.getCorrectDatetime(c).getFullYear(),"/").concat(this.getCorrectDatetime(c).getMonth()+1,"/1 0:00:00")]=h;break;default:r["".concat(this.getCorrectDatetime(c).getFullYear(),"/").concat(this.getCorrectDatetime(c).getMonth()+1)]=h}}return r}},{key:"_getGridsPerScale",value:function(t){for(var e=this._instanceProps,a=[],n={},i="/",r=0;r<e.grids;r++){var s=new Date(e.begin+r*e.scale),o=s.getFullYear(),c=Math.ceil(o/1e3),l=Math.ceil(o/100),h=Math.ceil(o/10),u=Math.ceil(o/5),d=s.getMonth()+1,g=s.getDay(),p=s.getDate(),f=this.getWeek("".concat(o,"/").concat(d,"/").concat(p)),v=s.getHours(),E=s.getMinutes(),m=s.getSeconds();a.push({millennium:c,century:l,decade:h,lustrum:u,year:o,month:"".concat(o).concat(i).concat(d).concat(i,"1"),week:"".concat(o,",").concat(f),weekday:"".concat(o).concat(i).concat(d).concat(i).concat(p,",").concat(g),day:"".concat(o).concat(i).concat(d).concat(i).concat(p),hour:"".concat(o).concat(i).concat(d).concat(i).concat(p," ").concat(v),minute:"".concat(o).concat(i).concat(d).concat(i).concat(p," ").concat(v,":").concat(E),second:"".concat(o).concat(i).concat(d).concat(i).concat(p," ").concat(v,":").concat(E,":").concat(m),datetime:s.toString()})}return a.forEach(function(e){n[e[t]]?n[e[t]]++:n[e[t]]=1}),this.toIterableObject(n)}},{key:"_createRulerContent",value:function(e,t,a){for(var n=this._config,i=this._instanceProps,r=this.supplement(T.ruler.top.height,a.height),s=this.supplement(T.ruler.top.fontSize,a.fontSize),o=this.supplement(T.ruler.top.color,a.color),c=this.supplement(T.ruler.top.locale,a.locale,this.validateString),l=this.supplement(T.ruler.top.format,a.format,this.validateObject),h=$("<div></div>",{class:N.TIMELINE_RULER_LINES,style:"width:100%;height:".concat(r,"px;")}),u=Object.keys(e),d=0;d<u.length;d++){var g=u[d],p=/^(year|month)s?$/i.test(n.scale)?e[g]:e[g]*i.scaleSize,f=$("<div></div>",{class:N.TIMELINE_RULER_ITEM,style:"width:".concat(p,"px;height:").concat(r,"px;line-height:").concat(r,"px;font-size:").concat(s,"px;color:").concat(o,";")}),v=this.getLocaleString(g,t,c,l),E="";E="".concat(t,"-").concat(""===E?String(g):E),f.attr("data-ruler-item",E).html(v),p>this.strWidth(v)&&p>$(this._element).width()&&f.addClass(N.RULER_ITEM_ALIGN_LEFT),h.append(f).attr("data-ruler-scope",t)}return h}},{key:"_createSideIndex",value:function(e){var t=this._config,a=this._instanceProps,n=this.supplement(T.sidebar.sticky,t.sidebar.sticky),i=this.supplement(T.sidebar.overlay,t.sidebar.overlay),r=this.supplement(T.sidebar.list,t.sidebar.list),s=$("<div></div>",{class:N.TIMELINE_SIDEBAR}),o=$("<div></div>",{class:N.TIMELINE_SIDEBAR_MARGIN}),c=$("<div></div>",{class:N.TIMELINE_SIDEBAR_ITEM});n&&s.addClass(N.STICKY_LEFT),i&&c.addClass(N.OVERLAY),0<e.top&&s.prepend(o.clone().css("height","".concat(e.top+1,"px")));for(var l=0;l<a.rows;l++){var h=c.clone().html(r[l]);s.append(h)}return s.find(E.TIMELINE_SIDEBAR_ITEM).css("height","".concat(a.rowSize+.5,"px")).css("line-height","".concat(a.rowSize+.5,"px")),0<e.bottom&&s.append(o.clone().css("height","".concat(e.bottom+1,"px"))),s}},{key:"_createFooter",value:function(){var e=this._config,t=this._instanceProps,a=this.supplement(T.footer.display,e.footer.display),n=this.supplement(null,e.footer.content),i=this.supplement(T.footer.range,e.footer.range),r=this.supplement(T.footer.locale,e.footer.locale),s=this.supplement(T.footer.format,e.footer.format),o=this.supplement(null,t.begin),c=this.supplement(null,t.end),l=$("<div></div>",{class:N.TIMELINE_FOOTER});if(i&&o&&c){var h="".concat(new Date(o).toLocaleString(r,s),'<span class="').concat(N.RANGE_SPAN,'"></span>').concat(new Date(c).toLocaleString(r,s));l.append('<div class="'.concat(N.RANGE_META," ").concat(N.ALIGN_SELF_RIGHT,'">').concat(h,"</div>"))}return n&&l.append('<div class="'.concat(N.TIMELINE_FOOTER_CONTENT,'">').concat(n,"</div>")),a||l.addClass(N.HIDE),l}},{key:"_diffDate",value:function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"millisecond",n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=this.supplement(null,e),r=this.supplement(null,t),s=0,o=!1,c=function(e){var t=new Date(e.getFullYear(),e.getMonth()+1,1);return t.setTime(t.getTime()-1),t.getDate()},l=function(e){for(var t=new Date(e.getFullYear(),0,1),a=0,n=0;n<12;n++)t.setMonth(n),a+=c(t);return 365!=a};if(!i||!r)return console.warn("Cannot parse date because invalid format or undefined."),!1;s=r-i,n&&(s=Math.abs(s));var h=new Date(i),u=new Date(r),d=u.getFullYear()-h.getFullYear(),g={};switch(!0){case/^years?$/i.test(a):if(0<d)for(var p=0;p<=d;p++){var f=new Date(h.getFullYear()+p,0,1);g["".concat(h.getFullYear()+p)]=l(f)?366:365}else g["".concat(h.getFullYear())]=l(h)?366:365;o=g;break;case/^months?$/i.test(a):if(0<d){for(var v=h.getMonth();v<12;v++){var E=new Date(h.getFullYear(),v,1);g["".concat(h.getFullYear(),"/").concat(v+1)]=c(E)}if(1<d)for(var m=1;m<d;m++)for(var _=0;_<12;_++){var y=new Date(h.getFullYear()+m,_,1);g["".concat(h.getFullYear()+m,"/").concat(_+1)]=c(y)}for(var b=0;b<=u.getMonth();b++){var w=new Date(u.getFullYear(),b,1);g["".concat(u.getFullYear(),"/").concat(b+1)]=c(w)}}else for(var I=h.getMonth();I<=u.getMonth();I++){var T=new Date(h.getFullYear(),I,1);g["".concat(h.getFullYear(),"/").concat(I+1)]=c(T)}o=g;break;case/^weeks?$/i.test(a):o=Math.ceil(s/6048e5);break;case/^(|week)days?$/i.test(a):o=Math.ceil(s/864e5);break;case/^hours?$/i.test(a):o=Math.ceil(s/36e5);break;case/^minutes?$/i.test(a):o=Math.ceil(s/6e4);break;case/^seconds?$/i.test(a):o=Math.ceil(s/1e3);break;default:o=s}return o}},{key:"_loadEvent",value:function(){this._debug("_loadEvent");var a=this,e=this._element,t=$(e).find(E.DEFAULT_EVENTS),n=0,i=[],r=0;t.children().each(function(){var e=$(this).attr("data-timeline-node");void 0!==e&&!1!==e&&n++}),0!=t.length&&0!=n||this._debug("Enable event does not exist."),t.children().each(function(){var e=a._getPluggableParams($(this).attr("data-timeline-node")),t={};a.is_empty(e)||(t=a._registerEventData(this,e),i.push(t),r=Math.max(r,parseInt(t.eventId,10)))});var s=[];i.forEach(function(e,t,a){var n=parseInt(a[t].eventId,10);0==n||s.includes(n)?(r++,a[t].eventId=r):a[t].eventId=n,s.push(a[t].eventId)}),this._isCached=this._saveToCache(i)}},{key:"_registerEventData",value:function(t,a){var e,n,i,r=this,s=this._config,o=this._instanceProps,c=h({},v,{uid:this.generateUniqueID(),label:$(t).html()}),l={};return a.hasOwnProperty("start")&&(e=this._getCoordinateX(a.start),c.x=this.numRound(e,2),a.hasOwnProperty("end")?(n=(e=this._getCoordinateX(a.end))-c.x,c.width=this.numRound(n,2),s.eventMeta.display&&(this.is_empty(s.eventMeta.content)&&!a.hasOwnProperty("rangeMeta")?(c.rangeMeta+=this.getLocaleString(a.start,s.eventMeta.scale,s.eventMeta.locale,s.eventMeta.format),c.rangeMeta+=" - ".concat(this.getLocaleString(a.end,s.eventMeta.scale,s.eventMeta.locale,s.eventMeta.format))):c.rangeMeta=s.eventMeta.content)):c.width=0,a.hasOwnProperty("row")&&(i=Math.floor(a.row/2),c.y=(a.row-1)*s.rowHeight+c.margin+i),Object.keys(c).forEach(function(e){switch(!0){case/^eventId$/i.test(e):a.hasOwnProperty("id")&&r.is_empty(c.eventId)?c.eventId=parseInt(a.id,10):c.eventId=parseInt(a[e],10)||0;break;case/^(label|content)$/i.test(e):a.hasOwnProperty(e)&&!r.is_empty(a[e])&&(c[e]=a[e]),0<$(t).children(".event-".concat(e)).length&&(c[e]=$(t).children(".event-".concat(e)).html());break;case/^relation$/i.test(e):/^point(|er)$/i.test(s.type)&&(l.x=r.numRound(c.x,2),l.y=r.numRound(o.rowSize*((a.row||1)-1)+o.rowSize/2,2),c[e]=h({},a[e],l));break;default:a.hasOwnProperty(e)&&!r.is_empty(a[e])&&(c[e]=a[e])}})),c}},{key:"_getCoordinateX",value:function(e){var t=this._instanceProps,a=this.supplement(null,this._getPluggableDatetime(e)),n=0;return a?n=0<=a-t.begin&&0<=t.end-a?Math.abs(a-t.begin)/t.scale*t.scaleSize:(a-t.begin)/t.scale*t.scaleSize:console.warn("Cannot parse date because invalid format or undefined."),n}},{key:"_saveToCache",value:function(e){var t=/^local(|Storage)$/i.test(this._config.storage)?"localStorage":"sessionStorage";if(t in window&&null!==("localStorage"===t?window.localStorage:window.sessionStorage))return"localStorage"===t?localStorage.setItem(this._selector,JSON.stringify(e)):sessionStorage.setItem(this._selector,JSON.stringify(e)),!0;throw new TypeError('The storage named "'.concat(t,'" can not be available.'))}},{key:"_loadToCache",value:function(){var e=/^local(|Storage)$/i.test(this._config.storage)?"localStorage":"sessionStorage";if(!(e in window&&null!==("localStorage"===e?window.localStorage:window.sessionStorage)))throw new TypeError('The storage named "'.concat(e,'" can not be available.'));return"localStorage"===e?JSON.parse(localStorage.getItem(this._selector)):JSON.parse(sessionStorage.getItem(this._selector))}},{key:"_removeCache",value:function(){var e=/^local(|Storage)$/i.test(this._config.storage)?"localStorage":"sessionStorage";if(!(e in window&&null!==("localStorage"===e?window.localStorage:window.sessionStorage)))throw new TypeError('The storage named "'.concat(e,'" can not be available.'));"localStorage"===e?localStorage.removeItem(this._selector):sessionStorage.removeItem(this._selector)}},{key:"_placeEvent",value:function(){var a=this;if(this._debug("_placeEvent"),this._isCached){var e=this._element,t=this._config,n=$(e).find(E.TIMELINE_EVENTS),i=$(e).find(E.TIMELINE_RELATION_LINES),r=this._loadToCache();0<r.length&&(n.empty(),r.forEach(function(e){var t=a._createEventNode(e);t&&n.append(t)})),/^point(|er)$/i.test(t.type)&&this._drawRelationLine(r),this.sleep(1).then(function(){a.hideLoader(),n.fadeIn("fast",function(){i.fadeIn("fast")})})}}},{key:"_createEventNode",value:function(e){var t=this._config,a=this._instanceProps,n=$("<div></div>",{class:N.TIMELINE_EVENT_NODE,id:"evt-".concat(e.eventId),css:{left:"".concat(e.x,"px"),top:"".concat(e.y,"px"),width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),color:this.hexToRgbA(e.color),backgroundColor:this.hexToRgbA(e.bgColor)},html:'<div class="'.concat(N.TIMELINE_EVENT_LABEL,'">').concat(e.label,"</div>")});if(0<=e.x?e.x<=a.fullwidth?e.x+e.width<=a.fullwidth||(e.width=a.fullwidth-e.x):e.width=-1:/^point(|er)$/i.test(t.type)?e.width=-1:e.x+e.width<=0?e.width=-1:(e.x+e.width<=a.fullwidth?e.width=Math.abs(e.x+e.width):e.width=a.fullwidth,e.x=0),/^point(|er)$/i.test(t.type)){if(e.width<0)return null;var i=this._getPointerSize(e.size,e.margin),r=this.numRound(e.x-i/2,2),s=this.numRound(e.y+(e.height-i)/2,2);n.addClass(N.VIEWER_EVENT_TYPE_POINTER).css("border-color",e.bdColor).css("left","".concat(r,"px")).css("top","".concat(s,"px")).css("width","".concat(i,"px")).css("height","".concat(i,"px")).attr("data-base-size",i).attr("data-base-left",r).attr("data-base-top",s)}else{if(e.width<1)return null;n.css("left","".concat(e.x,"px")).css("width","".concat(e.width,"px"))}if(n.attr("data-uid",e.uid),!this.is_empty(e.image))if(/^point(|er)$/i.test(t.type))n.css("background-image","url(".concat(e.image,")"));else{var o=e.height-2*e.margin;n.prepend('<img src="'.concat(e.image,'" class="').concat(N.TIMELINE_EVENT_THUMBNAIL,'" width="').concat(o,'" height="').concat(o,'" />'))}if(/^bar$/i.test(t.type)&&t.eventMeta.display&&(e.extend.meta=e.rangeMeta),!this.is_empty(e.extend))for(var c=Object.keys(e.extend),l=0;l<c.length;l++){var h=c[l];n.attr("data-".concat(h),e.extend[h]),"toggle"===h&&["popover","tooltip"].includes(e.extend[h])&&(n.attr("title",e.label),e.extend.hasOwnProperty("content")||n.attr("data-content",e.content))}return this.is_empty(e.callback)||n.attr("data-callback",e.callback),n}},{key:"_getPointerSize",value:function(e,t){var a=this._instanceProps,n=Math.min(a.scaleSize,a.rowSize)-2*t,i=null;switch(!0){case/^large$/i.test(e):i=Math.max(this.numRound(.8*n,1),12);break;case/^normal$/i.test(e):i=Math.max(this.numRound(n/2,1),12);break;case/^small$/i.test(e):i=Math.max(this.numRound(n/4,1),12);break;default:i=Math.max(parseInt(e,10),12)}return i}},{key:"_drawRelationLine",value:function(c){var d=this,g=this._config,p=this._instanceProps,e=$(this._element).find(E.TIMELINE_RELATION_LINES),f=e[0].getContext("2d"),l=function(e,t,a,n,i,r){var s={},o=d.numRound(Math.min(p.scaleSize,p.rowSize)/2,2);d.numRound(d._getPointerSize(i.size,g.marginHeight)/2,2);f.strokeStyle=v.bdColor,f.lineWidth=2.5,f.filter="url(#crisp)";for(var c=Object.keys(i.relation),l=0;l<c.length;l++){var h=c[l];switch(!0){case/^(|line)color$/i.test(h):f.strokeStyle=i.relation[h];break;case/^(|line)size$/i.test(h):f.lineWidth=parseInt(i.relation[h],10)||2.5;break;case/^curve$/i.test(h):if(/^(r|l)(t|b),?(r|l)?(t|b)?$/i.test(i.relation[h])){var u=i.relation[h].split(",");2==u.length?(s.before=u[0],s.after=u[1]):s[r]=u[0]}else("boolean"==typeof i.relation[h]&&i.relation[h]||"number"==typeof i.relation[h]&&Boolean(i.relation[h]))&&("before"===r?s[r]=n<t?a<e?"lb":e<a?"lb+lt":null:t<n?a<e?"lt":e<a?"lt+lb":null:null:"after"===r&&(s[r]=t<n?e<a?"rt":a<e?"rt+rb":null:n<t?e<a?"rb":a<e?"rb+rt":null:null))}}if(Math.abs(n-t)>p.rowSize&&(n+=Math.floor(Math.abs(n-t)/p.rowSize)),f.beginPath(),d.is_empty(s))f.moveTo(e,t),f.lineTo(a,n);else switch(!0){case/^lt$/i.test(s[r]):f.moveTo(e,t),Math.abs(e-a)>o&&f.lineTo(a-o,t),Math.abs(n-t)>o?(f.quadraticCurveTo(a,t,a,t+o),f.lineTo(a,n)):f.quadraticCurveTo(a,t,a,n);break;case/^lb$/i.test(s[r]):f.moveTo(e,t),Math.abs(e-a)>o&&f.lineTo(a+o,t),Math.abs(t-n)>o?(f.quadraticCurveTo(a,t,a,t-o),f.lineTo(a,n)):f.quadraticCurveTo(a,t,a,n);break;case/^rt$/i.test(s[r]):f.moveTo(e,t),Math.abs(a-e)>o&&f.lineTo(a-o,t),Math.abs(n-t)>o?(f.quadraticCurveTo(a,t,a,t+o),f.lineTo(a,n)):f.quadraticCurveTo(a,t,a,n);break;case/^rb$/i.test(s[r]):f.moveTo(e,t),Math.abs(a-e)>o&&f.lineTo(a-o,t),Math.abs(t-n)>o?(f.quadraticCurveTo(a,t,a,t-o),f.lineTo(a,n)):f.quadraticCurveTo(a,t,a,n);break;case/^lt\+lb$/i.test(s[r]):case/^lb\+lt$/i.test(s[r]):f.moveTo(e,t),f.lineTo(e-o,t),f.bezierCurveTo(e-2*o,t,e-2*o,n,e-o,n),f.lineTo(a,n);break;case/^rt\+rb$/i.test(s[r]):case/^rb\+rt$/i.test(s[r]):f.moveTo(e,t),f.lineTo(e+o,t),f.bezierCurveTo(e+2*o,t,e+2*o,n,e+o,n),f.lineTo(a,n)}f.stroke()};f.clearRect(0,0,e[0].width,e[0].height),c.forEach(function(e){var t,a,n,i,r,s,o=e.relation;o.hasOwnProperty("before")&&(t=o.x,a=o.y,(r=parseInt(o.before,10))<0?(n=0,i=a):(s=c.find(function(e){return parseInt(e.eventId,10)==r}),!d.is_empty(s)&&s.relation&&(n=s.relation.x<0?0:s.relation.x,i=s.relation.y)),0<=t&&0<=a&&0<=n&&0<=i&&l(t,a,n,i,e,"before")),o.hasOwnProperty("after")&&(t=o.x,a=o.y,(r=parseInt(o.after,10))<0?(n=p.fullwidth,i=a):(s=c.find(function(e){return parseInt(e.eventId,10)==r}),!d.is_empty(s)&&s.relation&&(n=s.relation.x>p.fullwidth?p.fullwidth:s.relation.x,i=s.relation.y)),0<=t&&0<=a&&0<=n&&0<=i&&l(t,a,n,i,e,"after"))})}},{key:"_mapPlacedEvents",value:function(){var a=this,e=$(this._element).find(E.TIMELINE_EVENTS).children(),n=this._loadToCache(),i=[];return!this._isCached||this.is_empty(n)||e.each(function(){var t=$(this).data("uid"),e=null;e=n?n.find(function(e){return e.uid===t})||null:$(this).data(),a.is_empty(e)||i.push(e)}),i}},{key:"_activeEvent",value:function(e){var t=e.target;"focusin"===e.type?($(E.TIMELINE_EVENT_NODE).removeClass("active"),$(t).addClass("active")):"focusout"===e.type&&$(t).removeClass("active")}},{key:"_hoverPointer",value:function(e){var t=this._instanceProps,a=e.target,n={left:$(a).data("baseLeft"),top:$(a).data("baseTop"),width:$(a).data("baseSize")},i=n.left,r=n.top,s=n.width,o=5;"mouseenter"===e.type?(s=Math.max(this.numRound(1.2*s,"ceil"),Math.min(t.rowSize,t.scaleSize)),i=this.numRound(i-(s-n.width)/2,2),r=this.numRound(r-(s-n.width)/2,2),o=9,$(a).trigger(g.FOCUSIN_EVENT)):$(a).trigger(g.FOCUSOUT_EVENT),$(a).css("left","".concat(i,"px")).css("top","".concat(r,"px")).css("width","".concat(s,"px")).css("height","".concat(s,"px")).css("z-index",o)}},{key:"_debug",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Notice";if(this._config.debug&&(e=this.supplement(null,e))){var a=void 0!==$(this._element).data(o)[e]?'Called method "'.concat(e,'".'):e,n=/^Called method "/.test(a)?"font-weight:600;color:blue;":"";if(window.console&&window.console.log){if("Notice"!==t)throw new Error("".concat(a));window.console.log("%c%s%c",n,a,"")}}}},{key:"initialized",value:function(){var e=this._isInitialized?'Skipped because method "initialized" already has been called once':"initialized";this._debug(e);var t=this._element,a=this._config,n=arguments.length<=0?void 0:arguments[0],i=0<n.length&&"function"==typeof n[0]?n[0]:null,r=1<n.length?n.slice(1):null;i&&!this._isInitialized&&(this._debug("Fired your callback function after initializing this plugin."),i(t,a,r)),this._isInitialized=!0}},{key:"destroy",value:function(){this._debug("destroy"),$.removeData(this._element,o),$(window,document,this._element).off(c),$(this._element).remove(),this._removeCache();for(var e=Object.keys(this),t=0;t<e.length;t++){var a=e[t];this[a]=null,delete this[a]}}},{key:"render",value:function(){throw new ReferenceError('This method named "render" has been deprecated since version 2.0.0')}},{key:"show",value:function(){this._debug("show");var e=this._element;this._isShown||($(e).removeClass(N.HIDE),this._isShown=!0)}},{key:"hide",value:function(){this._debug("hide");var e=this._element;this._isShown&&($(e).addClass(N.HIDE),this._isShown=!1)}},{key:"dateback",value:function(){this._debug("dateback")}},{key:"dateforth",value:function(){this._debug("dateforth")}},{key:"alignment",value:function(t){this._debug("alignment");var e=this._config,a=this._instanceProps,n=this._element,i=$(n).find(E.TIMELINE_CONTAINER),r=0;if(t=this.is_array(t)?t[0]:e.rangeAlign,!(a.fullwidth<=n.scrollWidth)){switch(!0){case/^(left|begin)$/i.test(t):r=0;break;case/^center$/i.test(t):r=(i[0].scrollWidth-n.scrollWidth)/2+1;break;case/^(right|end)$/i.test(t):r=i[0].scrollWidth-n.scrollWidth+1;break;case/^latest$/i.test(t):var s=this._mapPlacedEvents().sort(this.compareValues("x")),o=s[s.length-1];r=this.is_empty(o)?0:o.x,n.scrollWidth/2<r?r-=Math.ceil(n.scrollWidth/2):r=0,$("".concat(E.TIMELINE_EVENT_NODE,'[data-uid="').concat(o.uid,'"]')).trigger(g.FOCUSIN_EVENT);break;case/^\d{1,}$/.test(t):var c=this._mapPlacedEvents(),l={};0<c.length&&(l=c.find(function(e){return e.eventId==parseInt(t,10)})),r=this.is_empty(l)?0:l.x,Math.ceil(n.scrollWidth/2)<r?r-=Math.ceil(n.scrollWidth/2):r=0,$("".concat(E.TIMELINE_EVENT_NODE,'[data-uid="').concat(l.uid,'"]')).trigger(g.FOCUSIN_EVENT);break;case/^current(|ly)|now$/i.test(t):default:var h=(new Date).toString(),u=this.numRound(this._getCoordinateX(h),2);r=0<=u?i[0].scrollWidth-n.scrollWidth+1<u?i[0].scrollWidth-n.scrollWidth+1:u:0}i.scrollLeft(r)}}},{key:"getOptions",value:function(){throw new ReferenceError('This method named "getOptions" has been deprecated since version 2.0.0')}},{key:"addEvent",value:function(){var a=this;this._debug("addEvent");var e=arguments.length<=0?void 0:arguments[0],t=this.supplement(null,e[0],this.validateArray),n=1<e.length&&"function"==typeof e[1]?e[1]:null,i=2<e.length?e.slice(2):null,r=this._loadToCache(),s=0,o=!1;!this.is_empty(t)&&this._isCompleted&&(this.is_empty(r)||(r.sort(this.compareValues("eventId")),s=parseInt(r[r.length-1].eventId,10)),t.forEach(function(e){var t=a._registerEventData("<div></div>",e);a.is_empty(t)||(t.eventId=Math.max(s+1,parseInt(t.eventId,10)),r.push(t),s=parseInt(t.eventId,10),o=!0)}),o&&(this._saveToCache(r),this._placeEvent(),n&&(this._debug("Fired your callback function after replacing events."),n(this._element,this._config,i))))}},{key:"removeEvent",value:function(){var i=this;this._debug("removeEvent");var e=arguments.length<=0?void 0:arguments[0],t=this.supplement(null,e[0],this.validateArray),a=1<e.length&&"function"==typeof e[1]?e[1]:null,n=2<e.length?e.slice(2):null,r=this._loadToCache(),s={},o=!1;this.is_empty(t)||!this._isCompleted||this.is_empty(r)||(t.forEach(function(e){switch(!0){case/^\d{1,}$/.test(e):s.type="eventId",s.value=parseInt(e,10);break;case/^(|\d{1,}(-|\/)\d{1,2}(-|\/)\d{1,2}(|\s\d{1,2}:\d{1,2}(|:\d{1,2})))(|,\d{1,}(-|\/)\d{1,2}(-|\/)\d{1,2}(|\s\d{1,2}:\d{1,2}(|:\d{1,2})))$/.test(e):var t=e.split(",");s.type="daterange",s.value={},s.value.from=i.is_empty(t[0])?null:new Date(t[0]),s.value.to=i.is_empty(t[1])?null:new Date(t[1]);break;default:s.type="regex",s.value=new RegExp(e)}r.forEach(function(e,t){switch(s.type){case"eventId":parseInt(e.eventId,10)==s.value&&(r.splice(t,1),o=!0);break;case"daterange":var a=s.value.from?Math.ceil(i._getCoordinateX(s.value.from.toString())):0,n=s.value.to?Math.floor(i._getCoordinateX(s.value.to.toString())):a;a<=e.x&&e.x<=n&&(r.splice(t,1),o=!0);break;case"regex":s.value.test(JSON.stringify(e))&&(r.splice(t,1),o=!0)}})}),o&&(this._saveToCache(r),this._placeEvent(),a&&(this._debug("Fired your callback function after placing additional events."),a(this._element,this._config,n))))}},{key:"updateEvent",value:function(){var r=this;this._debug("updateEvent");var e=arguments.length<=0?void 0:arguments[0],t=this.supplement(null,e[0],this.validateArray),a=1<e.length&&"function"==typeof e[1]?e[1]:null,n=2<e.length?e.slice(2):null,s=this._loadToCache(),o=!1;this.is_empty(t)||!this._isCompleted||this.is_empty(s)||(t.forEach(function(e){var a=r._registerEventData("<div></div>",e),n=null,t=s.find(function(e,t){return n=t,e.eventId==a.eventId}),i={};r.is_empty(t)||r.is_empty(a)||(a.hasOwnProperty("uid")&&delete a.uid,i=Object.assign(i,t,a),s[n]=i,o=!0)}),o&&(this._saveToCache(s),this._placeEvent(),a&&(this._debug("Fired your callback function after updating events."),a(this._element,this._config,n))))}},{key:"reload",value:function(){this._debug("reload");var e=arguments.length<=0?void 0:arguments[0],t=this.supplement(null,e[0],this.validateObject),a=1<e.length&&"function"==typeof e[1]?e[1]:null,n=2<e.length?e.slice(2):null,i=this._element,r=$(i).find(E.DEFAULT_EVENTS),s=this._config,o={};if(this.is_empty(t)||(o=Object.assign(o,s,t),this._config=o),this._isInitialized=!1,this._isCached=!1,this._isCompleted=!1,this._instanceProps={},$(i).empty().append(r),this._calcVars(),!this._verifyMaxRenderableRange())throw new RangeError("Timeline display period exceeds maximum renderable range.");this._isInitialized||(this._renderView(),this._isInitialized=!0),this._loadEvent(),this._placeEvent(),this._isCompleted=!0,a&&(this._debug("Fired your callback function after reloading timeline."),a(this._element,this._config,n))}},{key:"openEvent",value:function(e){this._debug("openEvent");var r=this,t=e.target,a=$(document).find(E.EVENT_VIEW),s=$(t).data("uid"),n=this.supplement(null,$(t).data("callback"));if(0<a.length&&a.each(function(){var e=this._loadToCache().find(function(e){return e.uid===s}),t=$("<div></div>",{class:N.VIEWER_EVENT_TITLE}),a=$("<div></div>",{class:N.VIEWER_EVENT_CONTENT}),n=$("<div></div>",{class:N.VIEWER_EVENT_META}),i=$("<div></div>",{class:N.VIEWER_EVENT_IMAGE_WRAPPER});$(this).empty(),r.is_empty(e.image)||(i.append('<img src="'.concat(e.image,'" class="').concat(N.VIEWER_EVENT_IMAGE,'" />')),$(this).append(i)),r.is_empty(e.label)||(t.html(e.label),$(this).append(t)),r.is_empty(e.content)||(a.html(e.content),$(this).append(a)),r.is_empty(e.rangeMeta)||(n.html(e.rangeMeta),$(this).append(n))}),n){this._debug('The callback "'.concat(n,'" was called by the "openEvent" method.'));try{Function.call(null,"return ".concat(n))()}catch(e){throw new TypeError(e)}}}},{key:"showLoader",value:function(){this._debug("showLoader");var e=this._element,t=this._config,a=$(e).find(E.TIMELINE_CONTAINER),n=0<a.length?a.width():$(e).width(),i=(0<a.length?a.height():$(e).height())||120,r=$("<div></div>",{id:"jqtl-loader",style:"width:".concat(n,"px;height:").concat(i,"px;")});if(!1!==t.loader){if(0==$(t.loader).length){"Loading...".match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[\s\S]|^$/g).filter(Boolean).forEach(function(e,t){var a=$("<div></div>",{id:"jqtl-loading_".concat(t+1),class:N.LOADER_ITEM}).text(e);r.append(a)})}else{var s=$(t.loader).clone().prop("hidden",!1).css("display","block");r.append(s)}0==$(e).find(E.LOADER).length&&(0<a.length?a.append(r):$(e).css("position","relative").css("min-height","".concat(i,"px")).append(r))}}},{key:"hideLoader",value:function(){this._debug("hideLoader"),$(this._element).find(E.LOADER).remove()}},{key:"is_empty",value:function(e){if(null==e)return!0;switch(r(e)){case"object":return Array.isArray(e)?0===e.length:!(0<Object.keys(e).length||0<Object.getOwnPropertySymbols(e).length)&&(void 0!==e.valueOf().length?0===e.valueOf().length:"object"===r(e.valueOf())||this.is_empty(e.valueOf()));case"string":return""===e;case"number":return 0==e;case"boolean":return!e;case"undefined":case"null":return!0;case"symbol":case"function":default:return!1}}},{key:"is_array",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"is_iterable",value:function(e){return e&&"function"==typeof e[Symbol.iterator]}},{key:"toIterableObject",value:function(t){return this.is_iterable(t)||(t[Symbol.iterator]=function(){var e=0;return{next:function(){return t.length<=e?{done:!0}:{value:t[e++]}}}}),t}},{key:"sleep",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return new Promise(function(e){setTimeout(e,t)})}},{key:"supplement",value:function(e,t,a){return void 0===t?e:void 0===a?t:a(e,t)}},{key:"generateUniqueID",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e3;return(new Date).getTime().toString(16)+Math.floor(e*Math.random()).toString(16)}},{key:"numRound",value:function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"round";t=this.supplement(0,t,this.validateNumeric);var n=Math.pow(10,t);switch(!0){case/^ceil$/i.test(a):return Math.ceil(e*n)/n;case/^floor$/i.test(a):return Math.floor(e*n)/n;case/^round$/i.test(a):default:return Math.round(e*n)/n}}},{key:"hexToRgbA",value:function(e){var t,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(3==(t=e.substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x".concat(t.join("")),"rgba(".concat([t>>16&255,t>>8&255,255&t].join(","),",").concat(a,")")):e}},{key:"getCorrectDatetime",value:function(e){var t=function(e){return e.replace(/-/g,"/")};if(isNaN(Date.parse(t(e))))return console.warn('"'.concat(e,'" Cannot parse date because invalid format.')),null;var a=new Date(t(e)),n=e.split(/-|\//);return parseInt(n[0],10)<100&&a.setFullYear(parseInt(n[0],10)),a}},{key:"getWeek",value:function(e){var t=new Date(e),a=new Date(t.getFullYear(),0,1);return Math.ceil(((t-a)/864e5+a.getDay()+1)/7)}},{key:"getHigherScale",value:function(e){var t=e;switch(!0){case/^millisec(|ond)s?$/i.test(e):t="second";break;case/^seconds?$/i.test(e):t="minute";break;case/^minutes?$/i.test(e):t="hour";break;case/^quarter-?(|hour)$/i.test(e):case/^half-?(|hour)$/i.test(e):case/^hours?$/i.test(e):t="day";break;case/^days?$/i.test(e):case/^weeks?$/i.test(e):t="month";break;case/^months?$/i.test(e):t="year";break;case/^years?$/i.test(e):t="lustrum";break;case/^lustrum$/i.test(e):t="decade";break;case/^dec(ade|ennium)$/i.test(e):t="century";break;case/^century$/i.test(e):t="millennium";break;case/^millenniums?|millennia$/i.test(e):}return t}},{key:"getLocaleString",value:function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"en-US",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};var i,r,s=function(){try{(new Date).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}(),o="",c={},l=function(e){var t=["th","st","nd","rd"],a=e%100;return e+(t[(a-20)%10]||t[a]||t[0])};for(i in n)"timeZone"!==i&&"hour12"!==i||(c[i]=n[i]);switch(!0){case/^millenniums?|millennia$/i.test(t):case/^century$/i.test(t):case/^dec(ade|ennium)$/i.test(t):case/^lustrum$/i.test(t):o=n.hasOwnProperty(t)&&"ordinal"===n[t]?l(e):e;break;case/^years?$/i.test(t):s&&n.hasOwnProperty(t)&&(["numeric","2-digit"].includes(n[t])?(c.year=n[t],o=this.getCorrectDatetime(e).toLocaleString(a,c)):"zerofill"===n[t]&&(o=function(e){var t,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:4,n=(t="0",Array(a-1+1).join(t));return String(e).length==a?String(e):(n+e).substr(-1*e)}(e))),o=this.is_empty(o)?this.getCorrectDatetime(e).getFullYear():o;break;case/^months?$/i.test(t):s&&n.hasOwnProperty(t)&&["numeric","2-digit","narrow","short","long"].includes(n[t])&&(c.month=n[t],o=new Date(e).toLocaleString(a,c)),o=this.is_empty(o)?new Date(e).getMonth()+1:o;break;case/^weeks?$/i.test(t):r=e.split(","),o=n.hasOwnProperty(t)&&"ordinal"===n[t]?l(r):r[1];break;case/^weekdays?$/i.test(t):if(r=e.split(","),s)c.weekday=n.hasOwnProperty("weekday")?n.weekday:"narrow",o=new Date(r[0]).toLocaleString(a,c);else{o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][r[1]]}break;case/^days?$/i.test(t):o=s?(c.day=n.hasOwnProperty("day")?n.day:"numeric",a=n.hasOwnProperty("day")?a:"en-US",new Date(e).toLocaleString(a,c)):new Date(e).getDate();break;case/^hours?$/i.test(t):case/^(half|quarter)-?hours?$/i.test(t):if("string"==typeof e){var h=e.split(":");1==h.length?e="".concat(e,":00:00"):2==h.length&&(e="".concat(e,":00"))}o=s?(c.hour=n.hasOwnProperty("hour")?n.hour:"numeric",n.hasOwnProperty("minute")&&(c.minute=n.hasOwnProperty("minute")?n.minute:"numeric"),new Date(e).toLocaleString(a,c)):new Date(e).getHours();break;case/^minutes?$/i.test(t):o=s?(c.minute=n.hasOwnProperty("minute")?n.minute:"numeric",n.hasOwnProperty("hour")&&(c.hour=n.hasOwnProperty("hour")?n.hour:"numeric"),new Date(e).toLocaleString(a,c)):new Date(e).getMinutes();break;case/^seconds?$/i.test(t):o=s?(c.second=n.hasOwnProperty("second")?n.second:"numeric",n.hasOwnProperty("hour")&&(c.hour=n.hasOwnProperty("hour")?n.hour:"numeric"),n.hasOwnProperty("minute")&&(c.minute=n.hasOwnProperty("minute")?n.minute:"numeric"),new Date(e).toLocaleString(a,c)):new Date(e).getSeconds();break;case/^millisec(|ond)s?$/i.test(t):default:o=new Date(e)}return o}},{key:"strWidth",value:function(e){var t,a=$('<span id="jqtl-str-ruler"></span>');return 0==$("#jqtl-str-ruler").length&&$("body").append(a),t=$("#jqtl-str-ruler").text(e).get(0).offsetWidth,$("#jqtl-str-ruler").empty(),t}},{key:"compareValues",value:function(r){var s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"asc";return function(e,t){if(!e.hasOwnProperty(r)||!t.hasOwnProperty(r))return 0;var a="string"==typeof e[r]?e[r].toUpperCase():e[r],n="string"==typeof t[r]?t[r].toUpperCase():t[r],i=0;return n<a?i=1:a<n&&(i=-1),"desc"===s?-1*i:i}}},{key:"validateString",value:function(e,t){return"string"==typeof t&&""!==t?t:e}},{key:"validateNumeric",value:function(e,t){return"number"==typeof t?Number(t):e}},{key:"validateBoolean",value:function(e,t){return"boolean"==typeof t||"object"===r(t)&&null!==t&&"boolean"==typeof t.valueOf()?t:e}},{key:"validateObject",value:function(e,t){return"object"===r(t)?t:e}},{key:"validateArray",value:function(e,t){return"[object Array]"===Object.prototype.toString.call(t)?t:e}}])&&n(e.prototype,t),a&&n(e,a),i}();$.fn[s]=p._jQueryInterface,$.fn[s].Constructor=p,$.fn[s].noConflict=function(){return $.fn[s]=l,p._jQueryInterface}},{}]},{},[1]);
//# sourceMappingURL=jquery.timeline.min.js.map
